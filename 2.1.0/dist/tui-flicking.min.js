/*!
 * tui-flicking.min.js
 * @version 2.1.0
 * @author NHNEnt FE Development Lab <dl_javascript@nhnent.com>
 * @license MIT
 */
!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i(require("tui-animation"),require("tui-code-snippet"),require("tui-gesture-reader")):"function"==typeof define&&define.amd?define(["tui-animation","tui-code-snippet","tui-gesture-reader"],i):"object"==typeof exports?exports.Flicking=i(require("tui-animation"),require("tui-code-snippet"),require("tui-gesture-reader")):(t.tui=t.tui||{},t.tui.Flicking=i(t.tui&&t.tui.animation,t.tui&&t.tui.util,t.tui&&t.tui.GestureReader))}(this,function(t,i,e){return function(t){function i(s){if(e[s])return e[s].exports;var n=e[s]={exports:{},id:s,loaded:!1};return t[s].call(n.exports,n,n.exports,i),n.loaded=!0,n.exports}var e={};return i.m=t,i.c=e,i.p="dist",i(0)}([function(t,i,e){"use strict";function s(){var t=location.hostname;h.imagePing("https://www.google-analytics.com/collect",{v:1,t:"event",tid:"UA-115377265-9",cid:t,dp:t,dh:"flicking"})}var n,o=e(3),r=e(1),h=e(2);n=h.defineClass({useMagnetic:!0,template:"<div>{{data}}</div>",itemClass:"panel",itemTag:"div",flow:"horizontal",circular:!0,useFixedHTML:!0,flickRange:50,effect:"linear",duration:100,usageStatistics:!0,init:function(t){this.element=t.element,this.wrapper=t.wrapper,this.itemTag=t.itemTag||this.itemTag,this.itemClass=t.itemClass||this.itemClass,this.template=t.template||this.template,this.flow=t.flow||this.flow,this.useMagnetic=h.isExisty(t.useMagnetic)?t.useMagnetic:this.useMagnetic,this.circular=h.isExisty(t.circular)?t.circular:this.circular,this.useFixedHTML=!h.isExisty(t.data)&&this.useFixedHTML,this.effect=t.effect||this.effect,this.flickRange=t.flickRange||this.flickRange,this.duration=t.duration||this.duration,this.usageStatistics=h.isExisty(t.usageStatistics)?t.usageStatistics:this.usageStatistics,this.startPos={},this.savePos={},this._setConfig(),this.useFixedHTML||this._makeItems(t.data||""),this._initHelpers(),this._initElements(),this._initWrap(),this._attachEvent(),this.usageStatistics&&s()},_setConfig:function(){var t="vertical"===this.flow;t?this._config={direction:["N","S"],way:"top",dimension:"height",point:"y",width:this.element.clientHeight}:this._config={direction:["W","E"],way:"left",dimension:"width",point:"x",width:this.element.clientWidth}},_initHelpers:function(){this.movedetect=new o({flickRange:this.flickRange,type:"flick"})},_initWrap:function(){var t=this._config;this.wrapper.style[t.way]="0px",this.wrapper.style[t.dimension]=t.width*this.elementCount+"px"},_initElements:function(){var t=this._config;this.elementCount=0,h.forEachArray(this.wrapper.children,function(i){1===i.nodeType&&(i.style[t.dimension]=t.width+"px",this.elementCount+=1)},this)},_attachEvent:function(){this.onTouchMove=h.bind(this._onTouchMove,this),this.onTouchEnd=h.bind(this._onTouchEnd,this),this.onTouchStart=h.bind(this._onTouchStart,this),this.element.addEventListener("touchstart",this.onTouchStart)},_makeItems:function(t){var i=this._getElement(t);this.wrapper.appendChild(i)},_getElement:function(t){var i=document.createElement(this.itemTag);return i.className=this.itemClass,i.innerHTML=t,i.style[this._config.dimension]=this._config.width+"px",i},_onTouchStart:function(t){this.isLocked||(this.fire("beforeMove",this),this.useFixedHTML&&this.circular&&this._prepareMoveElement(),this._saveTouchStartData(t.touches[0]),document.addEventListener("touchmove",this.onTouchMove),document.addEventListener("touchend",this.onTouchEnd))},_onTouchMove:function(t){var i,e,s,n=this.startPos;t.preventDefault(),this.savePos.x=t.touches[0].clientX,this.savePos.y=t.touches[0].clientY,"horizontal"===this.flow?(e=n.x,s=this.savePos.x):(e=n.y,s=this.savePos.y),i=s-e,this.wrapper.style[this._config.way]=n[this._config.way]+i+"px"},_onTouchEnd:function(){var t=this._config.point;this.startPos[t]===this.savePos[t]?this._resetMoveElement():this.useMagnetic&&this._activeMagnetic(),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd)},_saveTouchStartData:function(t){this.startPos[this._config.way]=this._getElementPos(),this.savePos.x=this.startPos.x=t.clientX,this.savePos.y=this.startPos.y=t.clientY,this.startPos.time=(new Date).getTime()},_prepareMoveElement:function(){this._setClone(),this._setPrev(),this._setNext()},_resetMoveElement:function(){var t="none";this.useFixedHTML?this.circular&&this._removeClones({way:t}):this._removePadding({way:t})},_activeMagnetic:function(){this._fixInto({x:this.savePos.x,y:this.savePos.y,start:this.startPos.time,end:(new Date).getTime()})},setPrev:function(t){var i=this._config,e=this._getElement(t);this._expandMovePanel(),this.wrapper.style[i.way]=this._getElementPos()-i.width+"px",this.wrapper.insertBefore(e,this.wrapper.firstChild)},setNext:function(t){var i=this._getElement(t);this._expandMovePanel(),this.wrapper.appendChild(i)},_setClone:function(){var t=0;this.clones=h.filter(this.wrapper.children,function(i){return 1===i.nodeType&&(t+=1,!0)}),this.clones.count=t},_setPrev:function(){var t=1,i=this.clones,e=i.count,s=this._config,n=s.width*e,o=this.wrapper;for(h.isHTMLTag(o.firstChild)||this.wrapper.removeChild(o.firstChild);t<=e;t+=1)o.insertBefore(i[e-t].cloneNode(!0),o.firstChild);o.style[s.dimension]=this._getWidth()+n+"px",o.style[s.way]=this._getElementPos()-n+"px"},_setNext:function(){for(var t=this.clones,i=t.count,e=this._config,s=e.width*i,n=this.wrapper,o=0;o<i;o+=1)n.appendChild(t[o].cloneNode(!0));n.style[e.dimension]=this._getWidth()+s+"px"},_expandMovePanel:function(){this.wrapper.style[this._config.dimension]=this._getWidth()+this._config.width+"px"},_reduceMovePanel:function(){this.wrapper.style[this._config.dimension]=this._getWidth()-this._config.width+"px"},_isFlick:function(t){var i,e={list:[this.startPos,this.savePos]};return h.extend(e,t),i=this.movedetect.figure(e),i.isFlick},_fixInto:function(t){var i,e=this._isBackward(),s=this._isFlick(t),n=this.startPos[this._config.way];!s||this._isEdge(t)?(e=!e,i=this._getReturnPos(e),i.recover=!0):i=this._getCoverPos(e,n),this._moveTo(i,e)},_moveTo:function(t,i){var e,s=i?"backward":"forward",n=this.startPos[this._config.way],o=this._getMoved(),a=n+o,c="forward"===s?1:-1,d="horizontal"===this.flow,u=this._config,l=this;t.way=s,this.mover&&this.mover.cancel(),this.mover=r.anim({from:d?a:[0,a],to:d?a+t.dist:[0,a+t.dist],duration:this.duration,easing:this.effect,frame:function(t,i){e=(d?t:i)-a,l.wrapper.style[u.way]=e*c+a+"px"},complete:h.bind(this._complete,this,t,t.cover)}),this.mover.run()},_complete:function(t,i){i?this.fire("afterFlick",t):this.fire("returnFlick",t),this.isLocked=!1,this.wrapper.style[this._config.way]=t.dest+"px",this.useFixedHTML?this.circular&&this._removeClones(t):this._removePadding(t)},_removeClones:function(t){var i,e=this._config,s=t.recover?"none":t.way,n=this.clones.count,o=2*n,r=n;"forward"===s?r=n+1:"backward"===s&&(r=n-1),i=o-r,this._removeCloneElement(r,"firstChild"),this._removeCloneElement(i,"lastChild"),this.wrapper.style[e.dimension]=this._getWidth()-e.width*o+"px",this.wrapper.style[e.way]=0},_removeCloneElement:function(t,i){for(var e=this.wrapper,s=0;s<t;s+=1)1===e[i].nodeType?e.removeChild(e[i]):(e.removeChild(e[i]),s-=1)},_removePadding:function(t){var i=this.wrapper.getElementsByTagName(this.itemTag),e=i[0],s=i[i.length-1],n=this._config,o=t.recover?"none":t.way,r=this.wrapper;"forward"===o?s=i[1]:"backward"===o&&(e=i[1]),r.removeChild(e),r.removeChild(s),r.style[n.way]="0px",r.style[n.dimension]=this._getWidth()-2*n.width+"px"},_getReturnPos:function(t){var i=this._getMoved();return{dest:this.startPos[this._config.way],dist:t?i:-i,cover:!1}},_getCoverPos:function(t,i){var e=this._getMoved(),s={cover:!0};return t?(s.dist=-this._config.width+e,s.dest=i+this._config.width):(s.dist=-this._config.width-e,s.dest=i-this._config.width),s},_getMoved:function(){var t="horizontal"===this.flow?this.startPos.x:this.startPos.y,i="horizontal"===this.flow?this.savePos.x:this.savePos.y;return i-t},_isEdge:function(){var t,i,e;return!this.circular&&(t=!this._isBackward(),i=this._getElementPos(),e=this._getWidth(),!!(t&&i<=-e+this._config.width)||!t&&i>0)},_getWidth:function(){return parseInt(this.wrapper.style[this._config.dimension],10)},_getElementPos:function(){return parseInt(this.wrapper.style[this._config.way],10)},_isBackward:function(){var t=this.movedetect.getDirection([this.savePos,this.startPos]);return t===this._config.direction[0]}}),h.CustomEvents.mixin(n),t.exports=n},function(i,e){i.exports=t},function(t,e){t.exports=i},function(t,i){t.exports=e}])});